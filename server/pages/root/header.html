<!DOCTYPE html>
<html lang="en" data-theme="light"> <!-- Language set to English, with a light theme attribute -->
<head>
    <meta charset="UTF-8"> <!-- Character encoding -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive viewport -->
    <title data-i18n="company_name"></title> <!-- Page title -->

    <!-- Stylesheets for header and common components -->
    <link rel="stylesheet" href="../../assets/css/root/header.css">
    <link rel="stylesheet" href="../../components/components.css">

    <!-- Favicon -->
    <link rel="icon" href="../../assets/images/logo.png" type="image/x-icon" >

    <!-- JavaScript files; header.js loads immediately, functions.js deferred -->
    <script src="../../assets/js/root/header.js"></script> <!-- Load JS after HTML parsing -->
    <script src="../../assets/js/utils/functions.js" defer></script>
    <script src="../../assets/js/utils/lang.js" defer></script>
    <script src="../../assets/js/utils/user_functions.js" defer></script>
    <script src="../../components/built/form/form.js" defer></script>
</head>
<body>
<header>
    <div class="header_container">
        <!-- Logo and Title Section -->
        <div class="flex_container centering">
            <img src ="../../assets/images/logo.png" alt="Logo Company Name" class="tiny_image"> <!-- Site logo -->
            <h1 class="title" data-i18n="company_name"></h1> <!-- Site main title -->
        </div>

        <!-- Navigation and User Section -->
        <div class="header_buttons_container">

            <!-- Home Button -->
            <button class="header_button" data-i18n-tooltip="header_home" onclick="window.location.href='../../main.php'">
                <svg
                        fill="var(--secondary)"
                        stroke-width="0"
                        viewBox="0 0 1024 1024"
                        height="1em"
                        width="1em"
                        xmlns="http://www.w3.org/2000/svg"
                        class="toast_icon"
                >
                    <path
                            d="M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"
                    ></path>
                </svg>
            </button>

            <!-- Shop Button -->
            <button class="header_button" data-i18n-tooltip="header_shop" onclick="window.location.href='../../main.php?page=shop'">
                <svg
                        xmlns="http://www.w3.org/2000/svg"
                        height="1em"
                        width="1em"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="var(--secondary)"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="toast_icon"
                >
                    <path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"/>
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                    <path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"/>
                    <path d="M2 7h20"/>
                    <path d="M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"/>
                </svg>
            </button>

            <!-- Cart Button with dynamic item count -->
            <button class="header_button" data-i18n-tooltip="header_cart" onclick="window.location.href='../../main.php?page=cart'">
                <svg
                        stroke= var(--secondary)
                        fill="none"
                        stroke-width="2"
                        viewBox="0 0 24 24"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        height="1em"
                        width="1em"
                        xmlns="http://www.w3.org/2000/svg"
                        class="toast_icon"
                >
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path
                            d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                    ></path>
                </svg>
                <span class="header_button_counter" id="cart_label">
                  (<?php echo isset($_SESSION['totalItems']) ? $_SESSION['totalItems'] : 0; ?>)
                </span>
            </button>

            <!-- User Profile Button -->
            <button class="header_button" data-i18n-tooltip="header_account" id="header_profile">
                <svg
                        fill= "var(--secondary"
                        stroke-width="0"
                        viewBox="0 0 24 24"
                        height="1em"
                        width="1em"
                        xmlns="http://www.w3.org/2000/svg"
                        class="toast_icon"
                >
                    <path
                            d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"
                    ></path>
                </svg>
            </button>

            <!-- Overlay for profile panel background dimming -->
            <div id="overlay" class="profile_overlay"></div>

            <!-- Profile Panel (hidden/shown when user clicks profile button) -->
            <div id="header_account_panel" class="profile_header_panel">
                <div class="profile_panel_header">
                    <div class="profile_close_button">
                        <?php include($_SERVER['DOCUMENT_ROOT'].'/components/built/buttons/x.html'); ?> <!-- Close button icon -->
                    </div>
                    <svg
                            fill= "var(--secondary"
                            stroke-width="0"
                            viewBox="0 0 24 24"
                            height="1em"
                            width="1em"
                            xmlns="http://www.w3.org/2000/svg"
                            class="regular_image"
                    >
                        <path
                                d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"
                        ></path>
                    </svg>
                    <h2 id="profile_name" data-i18n="header_profile_slide"></h2> <!-- Profile heading -->
                </div>

                <!-- Conditional content: show if user is logged in -->
                <nav class="flex_container direction_column shadow centering">
                    <?php if (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] === true): ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=account'" data-i18n="profile_slide_account"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=orders'" data-i18n="profile_slide_my_orders"></button>
                    <?php if (isset($_SESSION['super_user']) && $_SESSION['super_user'] === '1'): ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=orders&user=super'" data-i18n="profile_slide_all_orders"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=shop&user=super'" data-i18n="profile_slide_all_products"></button>
                    <?php endif; ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=settings'" data-i18n="profile_slide_settings"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../start.php'" style="margin-top: 40px; background: var(--quaternary)" data-i18n="logout"></button>
                    <?php else: ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=login'" data-i18n="login"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=signup'" data-i18n="signin"></button>
                    <?php endif; ?>
                </nav>
            </div>

        </div>
    </div>
</header>
</body>

</html>