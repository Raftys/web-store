<!DOCTYPE html>
<html lang="en" data-theme="light"> <!-- Language set to English, with a light theme attribute -->
<head>
    <meta charset="UTF-8"> <!-- Character encoding -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive viewport -->
    <title data-i18n="company_name"></title> <!-- Page title -->

    <!-- Stylesheets for header and common components -->
    <link rel="stylesheet" href="../../assets/css/root/header.css">
    <link rel="stylesheet" href="../../components/components.css">

    <!-- Favicon -->
    <link rel="icon" href="../../assets/images/logo.png" type="image/x-icon" >

    <!-- JavaScript files; header.js loads immediately, functions.js deferred -->
    <script src="../../assets/js/root/header.js"></script> <!-- Load JS after HTML parsing -->
    <script src="../../assets/js/utils/functions.js" defer></script>
    <script src="../../assets/js/utils/lang.js" defer></script>
    <script src="../../assets/js/utils/user_functions.js" defer></script>
    <script src="../../components/built/form/form.js" defer></script>
</head>
<body>
<header>
    <div class="header_container">
        <!-- Logo and Title Section -->
        <div class="flex_container centering">
            <img src ="../../assets/images/logo.png" alt="Logo Company Name" class="tiny_image"> <!-- Site logo -->
            <h1 class="title" data-i18n="company_name"></h1> <!-- Site main title -->
        </div>

        <!-- Navigation and User Section -->
        <div class="header_buttons_container">

            <!-- Home Button -->
            <button class="header_button" data-i18n-tooltip="header_home" onclick="window.location.href='../../main.php'">
                <img src="../../assets/icons/header/home.svg" alt="Header Home" class="toast_icon"/>
            </button>

            <!-- Shop Button -->
            <button class="header_button" data-i18n-tooltip="header_shop" onclick="window.location.href='../../main.php?page=shop'">
                <img src="../../assets/icons/header/store.svg" alt="Header Shop" class="toast_icon"/>
            </button>

            <!-- Cart Button with dynamic item count -->
            <button class="header_button" data-i18n-tooltip="header_cart" onclick="window.location.href='../../main.php?page=cart'">
                <img src="../../assets/icons/header/cart.svg" alt="Header Cart" class="toast_icon"/>
                <span class="header_button_counter" id="cart_label">
                  (<?php echo isset($_SESSION['totalItems']) ? $_SESSION['totalItems'] : 0; ?>)
                </span>
            </button>

            <!-- User Profile Button -->
            <button class="header_button" data-i18n-tooltip="header_account" id="header_profile">
                <img src="../../assets/icons/header/profile.svg" alt="Header Profile" class="toast_icon"/>
            </button>

            <!-- Overlay for profile panel background dimming -->
            <div id="overlay" class="profile_overlay"></div>

            <!-- Profile Panel (hidden/shown when user clicks profile button) -->
            <div id="header_account_panel" class="profile_header_panel">
                <div class="profile_panel_header">
                    <div class="profile_close_button">
                        <?php include($_SERVER['DOCUMENT_ROOT'].'/components/built/buttons/x.html'); ?> <!-- Close button icon -->
                    </div>
                    <img src="../../assets/icons/header/profile.svg" alt="Header Profile" class="regular_image"/> <!-- Profile icon -->
                    <h2 id="profile_name" data-i18n="header_profile_slide"></h2> <!-- Profile heading -->
                </div>

                <!-- Conditional content: show if user is logged in -->
                <nav class="flex_container direction_column shadow centering">
                    <?php if (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] === true): ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=account'" data-i18n="profile_slide_account"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=orders'" data-i18n="profile_slide_my_orders"></button>
                    <?php if (isset($_SESSION['super_user']) && $_SESSION['super_user'] === '1'): ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=orders&user=super'" data-i18n="profile_slide_all_orders"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=shop&user=super'" data-i18n="profile_slide_all_products"></button>
                    <?php endif; ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=settings'" data-i18n="profile_slide_settings"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../start.php'" style="margin-top: 40px; background: var(--quaternary)" data-i18n="logout"></button>
                    <?php else: ?>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=login'" data-i18n="login"></button>
                    <button class="simple_button profile_button" onclick="window.location.href='../main.php?page=signup'" data-i18n="signin"></button>
                    <?php endif; ?>
                </nav>
            </div>

        </div>
    </div>
</header>
</body>

</html>